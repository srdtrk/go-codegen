<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-add-contracts" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Add Contracts to the Test Suite | go-codegen</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://srdtrk.github.io/go-codegen/tutorial/add-contracts"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Add Contracts to the Test Suite | go-codegen"><meta data-rh="true" name="description" content="It&#x27;s time to add the contracts to the test suite. It might be helpful to give a brief overview of the contracts before adding them to the test suite."><meta data-rh="true" property="og:description" content="It&#x27;s time to add the contracts to the test suite. It might be helpful to give a brief overview of the contracts before adding them to the test suite."><link data-rh="true" rel="icon" href="/go-codegen/img/logo.svg"><link data-rh="true" rel="canonical" href="https://srdtrk.github.io/go-codegen/tutorial/add-contracts"><link data-rh="true" rel="alternate" href="https://srdtrk.github.io/go-codegen/tutorial/add-contracts" hreflang="en"><link data-rh="true" rel="alternate" href="https://srdtrk.github.io/go-codegen/tutorial/add-contracts" hreflang="x-default"><link rel="stylesheet" href="/go-codegen/assets/css/styles.6e19f2db.css">
<script src="/go-codegen/assets/js/runtime~main.1e90e545.js" defer="defer"></script>
<script src="/go-codegen/assets/js/main.5f92fbf2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/go-codegen/"><div class="navbar__logo"><img src="/go-codegen/img/logo.svg" alt="Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/go-codegen/img/logo.svg" alt="Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">go-codegen</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/go-codegen/tutorial/">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/srdtrk/go-codegen" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/go-codegen/tutorial/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/go-codegen/tutorial/setup-env">Set Up Your Work Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/go-codegen/tutorial/example-repo">Setup the Example Contract Repository</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/go-codegen/tutorial/scaffold-suite">Scaffold a Test Suite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/go-codegen/tutorial/add-contracts">Add Contracts to the Test Suite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/go-codegen/tutorial/custom-tests">Custom Tests</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/go-codegen/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Add Contracts to the Test Suite</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Add Contracts to the Test Suite</h1>
<p>It&#x27;s time to add the contracts to the test suite. It might be helpful to give a brief overview of the contracts before adding them to the test suite.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-cw-ica-controller">Overview of <code>cw-ica-controller</code><a href="#overview-of-cw-ica-controller" class="hash-link" aria-label="Direct link to overview-of-cw-ica-controller" title="Direct link to overview-of-cw-ica-controller">â€‹</a></h2>
<p>CosmWasm Interchain Account Controller is a pure CosmWasm implementation of the <a href="https://github.com/cosmos/ibc/tree/main/spec/app/ics-027-interchain-accounts" target="_blank" rel="noopener noreferrer">ICS-27 controller specifications</a>. It can therefore directly create and control accounts in the counterparty <code>icahost</code> module.</p>
<p><img decoding="async" loading="lazy" src="https://raw.githubusercontent.com/srdtrk/cw-ica-controller/main/docs/static/img/cw-ica-controller.svg" alt="cw-ica-controller" class="img_ev3q"></p>
<p>This contract was designed to be instantiated by other contracts that wish to control accounts in a counterparty chain. Learn more about the contract in its repository: <a href="https://github.com/srdtrk/cw-ica-controller" target="_blank" rel="noopener noreferrer">srdtrk/cw-ica-controller</a>.</p>
<div style="background:linear-gradient(78.06deg, #F69900 1.14%, #FFCE15 98.88%);border:0;border-radius:16px;padding:0 30px;display:flex;width:100%;justify-content:start;margin-bottom:20px;font-size:18px;flex-direction:column" class="highlightBox" id="note"><style>
          #note a {
            color: blue !important;
          }
        </style><div style="display:flex;align-items:center;margin-bottom:4px;margin-top:10px"><div style="align-self:center;filter:brightness(0)"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="21" fill="none" viewBox="0 0 17 21"><path fill="#1A1A1A" d="M5.3 14.5h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1 0-.5.4-1 1-1m0-4h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1 0-.5.4-1 1-1m5-10h-8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-12zm4 18h-12v-16h7v3c0 1.1.9 2 2 2h3z"></path></svg></div><h3 style="margin-top:10px;margin-left:10px;color:black">Note</h3></div><div style="color:black;margin-bottom:10px"><p>There are a couple important things to note about this contract:</p><ul>
<li>Since this contract was designed to be instantiated by other contracts, it does have the capability to make callbacks to an external contract on channel and packet lifecycle events. This is what the <code>callback-counter</code> test contract is for.</li>
</ul><div class="docusaurus-theme-github-codeblock"><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">src/types/callbacks.rs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">loading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="font-size:.9em;font-weight:600;color:#0E75DD;text-align:right;padding-bottom:13px;text-decoration:underline"><a href="https://github.com/srdtrk/cw-ica-controller/blob/d6b033092071e37f2dd015b58810a02257a92b6b/src/types/callbacks.rs#L15-L46" class="githubLink" style="margin:0 10px" target="_blank">View on GitHub</a></div></div><ul>
<li>This contract automatically initiates the channel opening handshake when it is instantiated and doesn&#x27;t allow any relayers to initiate the handshake.</li>
</ul><div class="docusaurus-theme-github-codeblock"><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">src/types/msg.rs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">loading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="font-size:.9em;font-weight:600;color:#0E75DD;text-align:right;padding-bottom:13px;text-decoration:underline"><a href="https://github.com/srdtrk/cw-ica-controller/blob/d6b033092071e37f2dd015b58810a02257a92b6b/src/types/msg.rs#L8-L21" class="githubLink" style="margin:0 10px" target="_blank">View on GitHub</a></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-contracts">Add the Contracts<a href="#add-the-contracts" class="hash-link" aria-label="Direct link to Add the Contracts" title="Direct link to Add the Contracts">â€‹</a></h2>
<p>In this test, we will only add the <code>cw-ica-controller</code> and <code>callback-counter</code> contracts to the test suite. To add the <code>cw-ica-controller</code> contract to the test suite, run the following command from the root of the workshop repository:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">go-codegen interchaintest add-contract schema/cw-ica-controller.json --suite-dir e2e/interchaintestv8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This command will generate the following files:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">e2e/interchaintestv8/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ contract_test.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â””â”€â”€ types</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    â””â”€â”€ cwicacontroller</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        â”œâ”€â”€ contract.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        â”œâ”€â”€ msgs.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        â””â”€â”€ query.go</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>contract_test.go</code> contains an example test case for instantiating the generated contract. This file is only generated if it doesn&#x27;t already exist in the test suite when the <code>add-contract</code> command is run.</p>
<p>You can also add the <code>callback-counter</code> contract to the test suite by running the following command:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">go-codegen interchaintest add-contract testing/contracts/callback-counter/schema/callback-counter.json --suite-dir e2e/interchaintestv8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This command will generate the following files:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">e2e/interchaintestv8/types/callbackcounter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ contract.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ msgs.go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â””â”€â”€ query.go</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will not modify the <code>contract_test.go</code> and the</p>
<div style="background:linear-gradient(78.06deg, #336667 1.14%, #00B067 98.88%);border:0;border-radius:16px;padding:0 30px;display:flex;width:100%;justify-content:start;margin-bottom:20px;font-size:18px;flex-direction:column" class="highlightBox" id="tip"><style>
          #tip a {
            color: #85c1e9 !important;
          }
        </style><div style="display:flex;align-items:center;margin-bottom:4px;margin-top:10px"><div style="align-self:center;filter:brightness(0) invert(1)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 21.2H11m7.7-12.5a6 6 0 0 0-12 0c0 2.3 2.4 4.4 3 5.8 1 1.8 1 3.2 1 3.2h4s0-1.4 1-3.2c.7-1.4 3-3.2 3-5.8"></path></svg></div><h3 style="margin-top:10px;margin-left:10px;color:#e6e6e6">Exploration</h3></div><div style="color:#e6e6e6;margin-bottom:10px"><p>Explore the generated files to understand how the contracts are added to the test suite.</p><p>Run the generated test and understand why it fails.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd e2e/interchaintestv8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go test -v . -run=TestWithContractTestSuite/TestContract</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<div style="background:linear-gradient(78.06deg, #00B067 1.14%, #FFD303 98.88%);border:0;border-radius:16px;padding:0 30px;display:flex;width:100%;justify-content:start;margin-bottom:20px;font-size:18px;flex-direction:column" class="highlightBox" id="warn"><style>
          #warn a {
            color: blue !important;
          }
        </style><div style="display:flex;align-items:center;margin-bottom:4px;margin-top:10px"><div style="align-self:center;filter:brightness(0)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0M12 9v4M12 17h.01"></path></svg></div><h3 style="margin-top:10px;margin-left:10px;color:black">Github Actions</h3></div><div style="color:black;margin-bottom:10px"><p>Github Actions will not run the test in the generated <code>contract_test.go</code> file. To do this, you need to add the test to the <code>.github/workflows/e2e.yml</code> file. Moreover, when running the generated test in Github Actions, you will need to build all the contracts before running the test.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">.github/workflows/e2e.yml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">strategy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">fail-fast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">matrix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">test</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)"># List your tests here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> TestWithBasicTestSuite/TestBasic</span><br></span><span class="token-line code-block-plus-diff-line" style="color:#F8F8F2"><span class="token plain">+         </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> TestWithContractTestSuite/TestContract</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> matrix.test </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Checkout sources</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> actions/checkout@v3</span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)"># You can build your contract here, you can either use docker or a custom cargo script:</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)"># We&#x27;ve provided examples for both below:</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)"># </span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)"># - name: Build Contracts with Docker</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#   run: |</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#     docker run --rm -v &quot;$(pwd)&quot;:/code \</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#     --mount type=volume,source=&quot;$(basename &quot;$(pwd)&quot;)_cache&quot;,target=/code/target \</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#     --mount type=volume,source=registry_cache,target=/usr/local/cargo/registry \</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#     cosmwasm/optimizer:0.15.1</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)"># - name: Install cargo-run-script</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#   uses: actions-rs/cargo@v1</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#   with:</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#     command: install</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#     args: cargo-run-script</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)"># - name: Build Optimized Contract</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#   uses: actions-rs/cargo@v1</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#   with:</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#     command: run-script</span><span class="token plain"></span><br></span><span class="token-line code-block-minus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">#     args: optimize</span><span class="token plain"></span><br></span><span class="token-line code-block-plus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">+     - name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Install just</span><br></span><span class="token-line code-block-plus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">+       uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> extractions/setup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">just@v2</span><br></span><span class="token-line code-block-plus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">+     - name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Build Test Contracts with Docker</span><br></span><span class="token-line code-block-plus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">+       run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> just build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">contracts</span><br></span><span class="token-line code-block-plus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">+     - name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Build Optimized Contract</span><br></span><span class="token-line code-block-plus-diff-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">+       run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> just build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">optimize</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Setup Go</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">go@v4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/srdtrk/go-codegen/tree/main/docs/docs/04-add-contracts.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/go-codegen/tutorial/scaffold-suite"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Scaffold a Test Suite</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/go-codegen/tutorial/custom-tests"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Custom Tests</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview-of-cw-ica-controller" class="table-of-contents__link toc-highlight">Overview of <code>cw-ica-controller</code></a></li><li><a href="#add-the-contracts" class="table-of-contents__link toc-highlight">Add the Contracts</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Tutorial</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/go-codegen/tutorial">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/srdtrk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/srdtrk/go-codegen" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>