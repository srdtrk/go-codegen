"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[323],{9559:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>g,frontMatter:()=>c,metadata:()=>a,toc:()=>h});var i=n(5893),o=n(1151),s=n(6562),r=n(3945);const c={title:"Scaffold a Test Suite",sidebar_label:"Scaffold a Test Suite",sidebar_position:3,slug:"/scaffold-suite"},l="Scaffold a Test Suite with go-codegen",a={id:"scaffold-suite",title:"Scaffold a Test Suite",description:"In go-codegen, a test suite is a go project that contains test cases for an application. The test suite is independent of the application and contracts can be added to the test suite independently. This allows for testing multiple contracts in a single test suite.",source:"@site/docs/03-scaffold-suite.md",sourceDirName:".",slug:"/scaffold-suite",permalink:"/go-codegen/tutorial/scaffold-suite",draft:!1,unlisted:!1,editUrl:"https://github.com/srdtrk/go-codegen/tree/main/docs/docs/03-scaffold-suite.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Scaffold a Test Suite",sidebar_label:"Scaffold a Test Suite",sidebar_position:3,slug:"/scaffold-suite"},sidebar:"docsSidebar",previous:{title:"Setup the Example Contract Repository",permalink:"/go-codegen/tutorial/example-repo"},next:{title:"Add Contracts to the Test Suite",permalink:"/go-codegen/tutorial/add-contracts"}},d={},h=[];function u(e){const t={a:"a",code:"code",h1:"h1",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"scaffold-a-test-suite-with-go-codegen",children:"Scaffold a Test Suite with go-codegen"}),"\n",(0,i.jsx)(t.p,{children:"In go-codegen, a test suite is a go project that contains test cases for an application. The test suite is independent of the application and contracts can be added to the test suite independently. This allows for testing multiple contracts in a single test suite."}),"\n",(0,i.jsx)(t.p,{children:"To scaffold the test suite, run the following command:"}),"\n",(0,i.jsx)(r.Z,{source:"https://github.com/srdtrk/awesomwasm-2024-workshop/commit/aaf977f390960514702f81c3c88a8754f26c57f5",children:"go-codegen interchaintest scaffold"}),"\n",(0,i.jsx)(t.p,{children:"This command will open an interactive prompt that will guide you through the process of creating a test suite. The prompt will ask you to provide the following information:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Scaffold Test Suite",src:n(3502).Z+"",width:"2300",height:"860"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Go Module Name"}),": The name of the Go module for the test suite."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Output Directory"}),": The directory where the test suite will be created."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Number of Chains to Scaffold"}),": The number of chains to scaffold in the test suite."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Github Actions"}),": Whether to scaffold Github Actions for the test suite."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"For this tutorial, we use the default values with github actions enabled."}),"\n",(0,i.jsx)(s.Z,{type:"note",title:"Note",children:(0,i.jsx)(t.p,{children:"The go module name doesn't matter as it is not published to the Go module registry. It is only required to be a valid Go module name."})}),"\n",(0,i.jsx)(t.p,{children:"The generated test suite will contain the following files and directories:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-text",children:"e2e/interchaintestv8\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 basic_test.go\n\u251c\u2500\u2500 chainconfig\n\u2502\xa0\xa0 \u251c\u2500\u2500 chain_config.go\n\u2502\xa0\xa0 \u251c\u2500\u2500 encoding.go\n\u2502\xa0\xa0 \u2514\u2500\u2500 genesis.go\n\u251c\u2500\u2500 e2esuite\n\u2502\xa0\xa0 \u251c\u2500\u2500 constants.go\n\u2502\xa0\xa0 \u251c\u2500\u2500 diagnostics.go\n\u2502\xa0\xa0 \u251c\u2500\u2500 grpc_query.go\n\u2502\xa0\xa0 \u251c\u2500\u2500 suite.go\n\u2502\xa0\xa0 \u2514\u2500\u2500 utils.go\n\u251c\u2500\u2500 go.mod\n\u251c\u2500\u2500 go.sum\n\u251c\u2500\u2500 testvalues\n\u2502\xa0\xa0 \u2514\u2500\u2500 values.go\n\u2514\u2500\u2500 types\n    \u2514\u2500\u2500 contract.go\n.github\n\u2514\u2500\u2500 workflows\n    \u2514\u2500\u2500 e2e.yml\n\n7 directories, 15 files\n"})}),"\n",(0,i.jsxs)(t.p,{children:["The test suite comes with a ",(0,i.jsx)(t.code,{children:"basic_test.go"})," which you can run already without any contracts. You can test this by running:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:"cd e2e/interchaintestv8\ngo test -v . -run=TestWithBasicTestSuite/TestBasic\n"})}),"\n",(0,i.jsx)(t.p,{children:"The testsuite contains 4 go packages:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"chainconfig"}),": Contains the chain configuration for the test suite. Currently, the only autogenerated chain is ",(0,i.jsx)(t.code,{children:"wasmd"})," v0.50.0"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"e2esuite"}),": Contains the core components of the testsuite, such as setting up chains, relayer, and important utility functions."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"testvalues"}),": Contains the test value constants for the test suite."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"types"}),": Contains the contract types for the test suite. We will populate this directory with the contract types for the contracts we want to test."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"basic_test.go"}),": Contains a basic test suite that can be run without any contracts."]}),"\n"]}),"\n",(0,i.jsxs)(s.Z,{type:"tip",title:"Exploration",children:[(0,i.jsxs)(t.p,{children:["Take some time to explore the test suite and ",(0,i.jsx)(t.code,{children:"basic_test.go"}),". A good exercise is to bump the version of the ",(0,i.jsx)(t.code,{children:"wasmd"})," chain to ",(0,i.jsx)(t.code,{children:"v0.51.0"})," which uses CosmWasm v2, and see how the test suite behaves."]}),(0,i.jsx)(t.p,{children:"To test github actions, you can open a pull request to your forked repository and see the actions run."})]}),"\n",(0,i.jsxs)(s.Z,{type:"reading",title:"More Chains",children:[(0,i.jsxs)(t.p,{children:["Although currently the test suite only contains the ",(0,i.jsx)(t.code,{children:"wasmd"})," image, you can change the chain configuration manually. We want to have options to scaffold additional chains in the future."]}),(0,i.jsx)(t.p,{children:"For example, the following repositories contain the chain configurations for other chains while still using the same test suite:"}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/srdtrk/cw-ica-controller/blob/d6b033092071e37f2dd015b58810a02257a92b6b/e2e/interchaintestv8/chainconfig/chain_config.go#L34-L55",children:"ibc-go-simd"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/chelofinance/cw-icq-controller/blob/3540483852bc0de8f0166b675d2573c5571b80e1/e2e/interchaintest/chainconfig/chain_config.go#L85-L109",children:"osmosis"})}),"\n"]})]})]})}function g(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},6562:(e,t,n)=>{n.d(t,{Z:()=>D});var i,o=n(7294);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}const r=e=>{let{title:t,titleId:n,...r}=e;return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:21,height:23,fill:"none",viewBox:"0 0 21 23","aria-labelledby":n},r),t?o.createElement("title",{id:n},t):null,i||(i=o.createElement("path",{fill:"#fff",d:"M9.302 22.2c-.1 0-.3 0-.4-.1-.4-.2-.6-.6-.6-1l.9-6.9h-7.9q-.6 0-.9-.6c-.2-.4-.1-.8.1-1.1l10-12c.3-.3.8-.5 1.2-.3s.6.6.6 1l-.9 6.9h7.9q.6 0 .9.6c.2.4.1.8-.1 1.1l-10 12c-.2.3-.5.4-.8.4m-5.9-10h6.9c.3 0 .6.1.7.3.2.2.3.5.2.8l-.6 4.6 6.4-7.7h-6.9c-.3 0-.6-.1-.7-.3-.2-.2-.3-.5-.2-.8l.6-4.6z"})))};var c;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}const a=e=>{let{title:t,titleId:n,...i}=e;return o.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:21,height:21,fill:"none",viewBox:"0 0 21 21","aria-labelledby":n},i),t?o.createElement("title",{id:n},t):null,c||(c=o.createElement("path",{fill:"#200F31",d:"M8.3 9.2h-7c-.6 0-1-.4-1-1v-7c0-.6.4-1 1-1h7c.6 0 1 .4 1 1v7c0 .5-.5 1-1 1m-6-2h5v-5h-5zM19.3 9.2h-7c-.6 0-1-.4-1-1v-7c0-.6.4-1 1-1h7c.6 0 1 .4 1 1v7c0 .5-.5 1-1 1m-6-2h5v-5h-5zM19.3 20.2h-7c-.6 0-1-.4-1-1v-7c0-.6.4-1 1-1h7c.6 0 1 .4 1 1v7c0 .5-.5 1-1 1m-6-2h5v-5h-5zM8.3 20.2h-7c-.6 0-1-.4-1-1v-7c0-.6.4-1 1-1h7c.6 0 1 .4 1 1v7c0 .5-.5 1-1 1m-6-2h5v-5h-5z"})))};var d;function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h.apply(this,arguments)}const u=e=>{let{title:t,titleId:n,...i}=e;return o.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:23,height:23,fill:"none",viewBox:"0 0 23 23","aria-labelledby":n},i),t?o.createElement("title",{id:n},t):null,d||(d=o.createElement("path",{fill:"#fff",d:"M11.3.2C5.2.2.3 5.1.3 11.2s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11m1 19.9v-2.9c0-.6-.4-1-1-1s-1 .4-1 1v2.9c-4.2-.5-7.5-3.8-7.9-7.9h2.9c.6 0 1-.4 1-1s-.4-1-1-1H2.4c.5-4.2 3.8-7.5 7.9-7.9v2.9c0 .6.4 1 1 1s1-.4 1-1V2.3c4.2.5 7.5 3.8 7.9 7.9h-2.9c-.6 0-1 .4-1 1s.4 1 1 1h2.9c-.4 4.2-3.7 7.5-7.9 7.9"})))};var g;function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f.apply(this,arguments)}const p=e=>{let{title:t,titleId:n,...i}=e;return o.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:23,height:22,fill:"none",viewBox:"0 0 23 22","aria-labelledby":n},i),t?o.createElement("title",{id:n},t):null,g||(g=o.createElement("path",{fill:"#fff",d:"M17.503 21.2c-.2 0-.3 0-.5-.1l-5.7-3-5.7 3c-.3.2-.7.1-1.1-.1-.3-.2-.5-.6-.4-1l1.1-6.4-4.6-4.5c-.3-.3-.4-.7-.3-1 .1-.4.4-.6.8-.7l6.4-.9 2.9-5.8c.3-.7 1.5-.7 1.8 0l2.9 5.8 6.4.9c.4.1.7.3.8.7s0 .8-.3 1l-4.6 4.5 1.1 6.4c.1.4-.1.8-.4 1-.2.1-.4.2-.6.2M3.403 9.1l3.5 3.5c.2.2.3.6.3.9l-.8 4.9 4.4-2.3q.45-.3.9 0l4.4 2.3-.8-4.9c-.1-.3.1-.7.3-.9l3.5-3.5-4.9-.7c-.3 0-.6-.3-.8-.5l-2.2-4.4-2.2 4.4c-.1.3-.4.5-.8.5z"})))};var m;function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v.apply(this,arguments)}const b=e=>{let{title:t,titleId:n,...i}=e;return o.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24","aria-labelledby":n},i),t?o.createElement("title",{id:n},t):null,m||(m=o.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.5 21.2H11m7.7-12.5a6 6 0 0 0-12 0c0 2.3 2.4 4.4 3 5.8 1 1.8 1 3.2 1 3.2h4s0-1.4 1-3.2c.7-1.4 3-3.2 3-5.8"})))};var x;function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},j.apply(this,arguments)}const w=e=>{let{title:t,titleId:n,...i}=e;return o.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",width:17,height:21,fill:"none",viewBox:"0 0 17 21","aria-labelledby":n},i),t?o.createElement("title",{id:n},t):null,x||(x=o.createElement("path",{fill:"#1A1A1A",d:"M5.3 14.5h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1 0-.5.4-1 1-1m0-4h6c.6 0 1 .4 1 1s-.4 1-1 1h-6c-.6 0-1-.4-1-1 0-.5.4-1 1-1m5-10h-8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-12zm4 18h-12v-16h7v3c0 1.1.9 2 2 2h3z"})))};var y;function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k.apply(this,arguments)}const M=e=>{let{title:t,titleId:n,...i}=e;return o.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",width:24,height:23,fill:"none",viewBox:"0 0 24 23","aria-labelledby":n},i),t?o.createElement("title",{id:n},t):null,y||(y=o.createElement("path",{fill:"#fff",d:"M18.203 7.2h-17c-.6 0-1 .4-1 1v9c0 2.8 2.2 5 5 5h8c2.8 0 5-2.2 5-5 2.8 0 5-2.2 5-5s-2.3-5-5-5m-2 10c0 1.7-1.3 3-3 3h-8c-1.7 0-3-1.3-3-3v-8h14zm2-2v-6c1.7 0 3 1.3 3 3 0 1.6-1.4 3-3 3M5.203 5.2c.6 0 1-.4 1-1v-3c0-.6-.4-1-1-1s-1 .4-1 1v3c0 .5.4 1 1 1M9.203 5.2c.6 0 1-.4 1-1v-3c0-.6-.4-1-1-1s-1 .4-1 1v3c0 .5.4 1 1 1M13.203 5.2c.6 0 1-.4 1-1v-3c0-.6-.4-1-1-1s-1 .4-1 1v3c0 .5.4 1 1 1"})))};var O;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E.apply(this,arguments)}const T=e=>{let{title:t,titleId:n,...i}=e;return o.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24","aria-labelledby":n},i),t?o.createElement("title",{id:n},t):null,O||(O=o.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10M12 16v-4M12 8h.01"})))};var S;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C.apply(this,arguments)}const B=e=>{let{title:t,titleId:n,...i}=e;return o.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24","aria-labelledby":n},i),t?o.createElement("title",{id:n},t):null,S||(S=o.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0M12 9v4M12 17h.01"})))};var F=n(5893);const I={tip:{color1:"#336667",color2:"#00B067",icon:(0,F.jsx)(b,{}),darkMode:!0},reading:{color1:"#F46800",color2:"#F24CF4",icon:(0,F.jsx)(r,{}),darkMode:!1},info:{color1:"#336667",color2:"#00B067",icon:(0,F.jsx)(T,{}),darkMode:!0},warn:{color1:"#00B067",color2:"#FFD303",icon:(0,F.jsx)(B,{}),darkMode:!1},warning:{color1:"#00B067",color2:"#FFD303",icon:(0,F.jsx)(B,{}),darkMode:!1},synopsis:{color1:"#1c1c1c",color2:"#1c1c1c",icon:null,darkMode:!0},prerequisite:{color1:"lightgray",color2:"lightgray",icon:(0,F.jsx)(a,{}),darkMode:!1},learning:{color1:"#6836D0",color2:"#05BDFC",icon:(0,F.jsx)(u,{}),darkMode:!0},"best-practice":{color1:"#6836D0",color2:"#6836D0",icon:(0,F.jsx)(p,{}),darkMode:!0},remember:{color1:"#6D0000",color2:"#F66800",icon:(0,F.jsx)(b,{}),darkMode:!0},note:{color1:"#F69900",color2:"#FFCE15",icon:(0,F.jsx)(w,{}),darkMode:!1},docs:{color1:"#6836D0",color2:"#F44CF6",icon:(0,F.jsx)(M,{}),darkMode:!0}},_=e=>{let{color1:t,color2:n}=e;return{background:`linear-gradient(78.06deg, ${t} 1.14%, ${n} 98.88%)`,border:0,borderRadius:16,padding:"0 30px",display:"flex",width:"100%",justifyContent:"start",marginBottom:20,fontSize:18,flexDirection:"column"}};const D=function(e){let{type:t,title:n,children:i}=e;const s=I[t]||I.info,r={backgroundColor:"var(--docusaurus-highlighted-code-line-bg)"},c={alignSelf:"center",filter:s.darkMode?"brightness(0) invert(1)":"brightness(0)"},l={marginTop:"10px",marginLeft:"10px",color:s.darkMode?"#e6e6e6":"black"},a={color:s.darkMode?"#e6e6e6":"black",marginBottom:"10px"},d=o.Children.map(i,(e=>"code"===e.type?o.cloneElement(e,{style:r}):e));return(0,F.jsxs)("div",{style:_(s),className:"highlightBox",id:t,children:[(0,F.jsx)("style",{children:`\n          #${t} a {\n            color: ${s.darkMode?"#85c1e9":"blue"} !important;\n          }\n        `}),(0,F.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px",marginTop:"10px"},children:[(0,F.jsx)("div",{style:c,children:s.icon}),(0,F.jsx)("h3",{style:l,children:n})]}),(0,F.jsx)("div",{style:a,children:d})]})}},3945:(e,t,n)=>{n.d(t,{Z:()=>r});n(7294);var i=n(3010),o=n.n(i),s=n(5893);function r(e){const{source:t,...n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o(),{...n}),t&&(0,s.jsx)("div",{className:"text-right mb-4",children:(0,s.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:"View Source"})})]})}},3502:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/scaffold-prompt-eea5ed1e63ecca84383588cd1dc657e1.png"}}]);